{
  "$schema": "http://json.schemastore.org/tsconfig",
  "display": "Build Configuration",
  "extends": "@bfra.me/tsconfig",
  "compilerOptions": {
    // Incremental compilation for better performance
    "incremental": true,
    // Enable composite mode for project references
    "composite": true,
    "tsBuildInfoFile": ".tsbuildinfo",

    // Performance optimizations for incremental builds
    "assumeChangesOnlyAffectDirectDependencies": true,

    "target": "ES2022",
    "module": "Preserve",
    // Module resolution optimized for build - keep consistent with base config
    "moduleResolution": "Bundler",
    // Generate declaration files for cross-package type safety
    "declaration": true,
    "declarationMap": true,

    "emitDeclarationOnly": false,
    "importHelpers": true,
    // Ensure proper emit
    "noEmit": false,
    // Output configuration - remove rootDir constraint
    "outDir": "dist",
    // Optimization settings
    "removeComments": true,
    "sourceMap": true,
    // Skip lib checks for faster builds
    "skipLibCheck": true
  },

  // Project references for workspace packages
  "references": [
    {
      "path": "./.github/actions/renovate-changesets/tsconfig.build.json"
    },
    {
      "path": "./.github/actions/update-metadata/tsconfig.build.json"
    }
  ],
  // Include TypeScript source files across the workspace
  "include": ["scripts/release.ts", "scripts/workspace-validate.ts"],

  // Exclude common non-source directories and problematic files with type issues
  "exclude": [
    "node_modules",
    "dist",
    "**/*.test.ts",
    "**/*.spec.ts",
    "coverage",
    ".tsbuildinfo",
    ".github/actions/*/src/**/*",
    "scripts/audit-typescript-references.ts",
    "scripts/build-performance.ts"
  ]
}
